needCalibRegistry: true
camera: ../camera
defaultLevel: Ccd

# The default policy file is contained within the obs_base/policy directory of the stack. However, specific entried can be overridden by including them in here (and, indeed, some are mandatory as they don't have equivalents in the default files).
# Even if it were possible and you **only** used the defaults in the obs_base/policy files you still need to include exposures, calibrations, and datasets so that it knows to refer to the defaults in obs_base.
exposures:
  raw:
    python: lsst.afw.image.DecoratedImageU
    persistable: DecoratedImageU
    template: 'raw/%(dateObs)s/%(dataType)s-%(visit)04d-%(filter)s-%(ccd)02d.fits'
  calexp:
    template: 'calexp/calexp/%(visit)07d/calexp-%(visit)07d_%(ccd)02d-%(filter)s.fits'
  postISRCCD:
    template: 'postISR/postISR/%(visit)07d/postISR-%(visit)07d_%(ccd)02d-%(filter)s.fits'

datasets:
  processCcd_metadata:
    template: 'processCcd_md/%(dateObs)s/processCcd_md-%(visit)04d-%(filter)s-%(ccd)02d.boost'
  icSrc:
    template: 'sci-results/icSrc/%(dateObs)s/icSrc-%(visit)04d-%(filter)s-%(ccd)02d.fits'
  src:
    template: 'sci-results/src/%(dateObs)s/src-%(visit)04d-%(filter)s-%(ccd)02d.fits'
  calexpBackground:
    template: 'calexp/bkgd/%(visit)07d/calexp-%(visit)07d_%(ccd)02d-%(filter)s.fits'

calibrations:
  bias:
    level: Ccd
    persistable: DecoratedImageF
    python: lsst.afw.image.DecoratedImageF
    template: calib/bias/bias-%(ccd)02d-%(calibDate)s.fits
  dark:
    level: Ccd
    tables: dark
    filter: false
    columns:
    - dateObs
    - ccd
    reference: raw
    refCols:
      - ccd
      - calibDate
    obsTimeName: dateObs
    persistable: DecoratedImageF
    python: lsst.afw.image.DecoratedImageF
    template: calib/dark/dark-%(ccd)02d-%(calibDate)s.fits
    validRange: true
  flat:
    level: Ccd
    tables: flat
    filter: true
    columns:
    - dateObs
    - ccd
    - filter
    reference: raw
    refCols:
      - ccd
      - calibDate
      - filter
    obsTimeName: dateObs
    persistable: DecoratedImageF
    python: lsst.afw.image.DecoratedImageF
    template: calib/flat/flat-%(ccd)02d-%(calibDate)s.fits
    validRange: true
  defects:
    level: Ccd
    persistable: DecoratedImageF
    python: lsst.afw.image.DecoratedImageF
    template: calib/defects/defects-%(ccd)02d-(calibDate)s.fits